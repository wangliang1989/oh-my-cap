# CAP 反演参数

## 语法

    cap.pl -Mmodel_depth/mag [-B] [-C<f1_pnl/f2_pnl/f1_sw/f2_sw>] [-D<w1/p1/p2>] [-F<thr>] [-Ggreen] [-Hdt]
        [-Idd[/dm]] [-J[iso[/diso[/clvd[/dclvd]]]]] [-Kvpvs[/mu]] [-L<tau>] [-N<n>] [-O]
        [-P[<Yscale[/Xscale[/k]]]>] [-Qnof] [-R<strike1/strike2/dip1/dip2/rake1/rake2>] [-S<s1/s2[/tie]>]
        [-T<m1/m2>] [-V<vp/vl/vr>] [-Udirct] [-Wi] [-Xn] [-Zstring] event_dirs

`event_dirs` 是事件的路径。`[]` 代表该参数为可选参数， `/` 是多个参数的分隔符， `< >` 在实际使用中不要键入，这里是为了表明其含义。

## 各参数含义

### `-C<f1_pnl>/<f2_pnl>/<f1_sw>/<f2_sw>`

为 Pnl 和面波分别指定一个带通滤波器。默认值是 `0.02/0.2/0.02/0.1`，即默认将 Pnl 滤波到0.02到0.2 Hz，将面波滤波到0.02到0.1 Hz。

### `-G<green>`

格林函数库的路径。如果格林函数库不在 `Glib/` 下，才需要用此参数特别指定。

### `-H<dt>`

采样周期。需要注意： `<dt>` 必须和 SAC 文件的头段 delta、计算格林函数的参数 dt 保持相等。如果这三者不相等，那么计算结果是错误的。这一点是程序设计的要求。

### `-I<dd>/[<dm>]`

strike/dip/rake以及震级的搜索步长。默认值为 10/0.1，表示 strike、dip、rake 按 10 度为步长来搜索，震级为0.1来搜索。

### `-J[<iso>[/<diso>[/<clvd>[/<dclvd>]]]]`

若不使用该选项，则只搜索双力偶解。加上该选项，则搜索完整的地震矩解。四个参数分别表示 ISO 分量的初始值以及步长、CLVD分量的初始值以及步长。

### `-K<vpvs>[/<mu>]`

使用震源处的 Vp/Vs 比以及剪切模块来计算 potency tensor parameters `ISO` 和 `P0`

### `-L<dura>`

指定震源函数的持续时间。

- 若不使用该选项，则根据初始震级自动估计震源持续时间
- 若 `-L` 选项后接一数字，则将该数字作为震源持续时间
- 若 `-L` 选项后接一 SAC 文件名，则将该 SAC 文件作为震源时间函数

### `-M<model>_<depth>/<mag>`

指定格林函数以及初始震级。例如， `-Mmodel_15/5.0` 表示使用 model 模型在震源深度为 15 km 处的格林函数，震源初始震级为 5.0。

### `-N<n>`

重复反演 n 次，每次从中剔除一些坏的波形数据。

### `-O`

若使用 `-O` 选项，则不会执行 cap 反演而是将传递给 cap 的参数输出到终端。该选项常用于调试。

### `-P[<Yscale>[/<Xscale>[/k]]`

绘制波形对比图，并指定波形的缩放比例。

- `<Yscale>` 指定了第一个波形的高度，单位为 inch
- `<Xscale>` 指定了图上每英寸所代表的波形秒数
- 若加上 `k` 则会保留所有绘图时所使用的临时波形文件，包括警告滤波和截窗的观测数据，以及最优机制解下的理论合成数据

### `-R<strike1>/<strike2>/<dip1>/<dip2>/<rake1>/<rake2>`

strike、dip和rake的搜索范围。默认值是 `0/360/0/90/-90/90`，即搜索所有可能解

### `-S<s1>/<s2>[/<tie>]`

-   `<s1>` Pnl 所能允许的最大时间偏移量
-   `<s2>` 面波所能允许的最大时间偏移量
-   `<tie>` SH 与 SV 偏移量之间的关联性，默认值是 0.5
    - `tie=0` 表示 SV 和 SH 的偏移量相互独立
    - `tie=0.5` 表示强制令 SH 和 SV 偏移相同

如 `-S5/10/0` 表示 Pnl波最多可以偏移 5 s，面波可以偏移 10 s，SV 和 SH 的偏移相互独立。

### `-T<m1>/<m2>`

Pnl 和面波的最大时窗长度，默认值为 `35/70` 。如果使用方法3确定时窗，则必须指定该选项。

### `-U<direc>`

使用该选项，则会考虑断层破裂方向对波形的影响， `<direc>` 为断层面上的破裂方向。

### `-V<vp>/<vl>/<vr>`

Pnl、Love 和 Rayleigh 波的视速度。如果使用方法2确定时窗，则必须指定该选项。

### `-W<i>`

`-W1` 表示观测波形数据为速度记录， `-W2` 表示观测波形数据为位移记录。

### `-X<n>`

若使用该选项，则会输出其他满足 `misfit-min<n*sigma` 的局部极小值解

### `-Z<string>`

默认权重文件名为 `weight.dat`，使用该选项可以指定使用其他权重文件。


### `-B, -D, -F, -Q`
